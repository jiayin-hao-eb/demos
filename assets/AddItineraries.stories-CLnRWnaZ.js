import{r as S,R as H}from"./iframe-BnhDRzsz.js";import{u as mi,M as gi}from"./index-DkA2nMPl.js";import{U as _i}from"./index-B7h41Mny.js";import{A as wi,R as vi}from"./index-BHNIAgFO.js";import{U as bi}from"./index-Bq2aSNq9.js";import{a as It,g as Ct,u as Rt,_ as Ze,b as U,d as we,s as Re,e as pr,f as xt,o as mr,q as yi,t as lt,c as Si,B as ct}from"./Box-DsEETO47.js";import{j as J}from"./jsx-runtime-CAa97x5m.js";import{T as Jt,B as Ei}from"./Button-BtpHCBih.js";import{u as gr}from"./index-DVyvgj4P.js";import{d as _r,o as wr,u as Qe,b as Ii,c as Ci}from"./Select-By66KAcz.js";import{K as Ri,a as xi}from"./index-D8retmPz.js";import"./preload-helper-PPVm8Dsz.js";import"./ExpandMore-MQzRoP5_.js";import"./Link-BqrcZCH6.js";import"./index-sOlJHcNS.js";import"./index-Dcsvbe5F.js";let Te;function vr(){if(Te)return Te;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),Te="reverse",t.scrollLeft>0?Te="default":(t.scrollLeft=1,t.scrollLeft===0&&(Te="negative")),document.body.removeChild(t),Te}function Ti(t,e){const r=t.scrollLeft;if(e!=="rtl")return r;switch(vr()){case"negative":return t.scrollWidth-t.clientWidth+r;case"reverse":return t.scrollWidth-t.clientWidth-r;default:return r}}function Ni(t){return Ct("MuiTab",t)}const me=It("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Oi=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Ai=t=>{const{classes:e,textColor:r,fullWidth:i,wrapped:n,icon:o,label:s,selected:a,disabled:l}=t,u={root:["root",o&&s&&"labelIcon",`textColor${pr(r)}`,i&&"fullWidth",n&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return xt(u,Ni,e)},Li=Re(mr,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.label&&r.icon&&e.labelIcon,e[`textColor${pr(r.textColor)}`],r.fullWidth&&e.fullWidth,r.wrapped&&e.wrapped,{[`& .${me.iconWrapper}`]:e.iconWrapper}]}})(({theme:t,ownerState:e})=>U({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${me.iconWrapper}`]:U({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${me.selected}`]:{opacity:1},[`&.${me.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${me.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${me.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${me.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${me.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),Qt=S.forwardRef(function(e,r){const i=Rt({props:e,name:"MuiTab"}),{className:n,disabled:o=!1,disableFocusRipple:s=!1,fullWidth:a,icon:l,iconPosition:u="top",indicator:h,label:f,onChange:m,onClick:g,onFocus:A,selected:b,selectionFollowsFocus:B,textColor:N="inherit",value:y,wrapped:E=!1}=i,D=Ze(i,Oi),$=U({},i,{disabled:o,disableFocusRipple:s,selected:b,icon:!!l,iconPosition:u,label:!!f,fullWidth:a,textColor:N,wrapped:E}),K=Ai($),ie=l&&f&&S.isValidElement(l)?S.cloneElement(l,{className:we(K.iconWrapper,l.props.className)}):l,ne=I=>{!b&&m&&m(I,y),g&&g(I)},se=I=>{B&&!b&&m&&m(I,y),A&&A(I)};return J.jsxs(Li,U({focusRipple:!s,className:we(K.root,n),ref:r,role:"tab","aria-selected":b,disabled:o,onClick:ne,onFocus:se,ownerState:$,tabIndex:b?0:-1},D,{children:[u==="top"||u==="start"?J.jsxs(S.Fragment,{children:[ie,f]}):J.jsxs(S.Fragment,{children:[f,ie]}),h]}))});function Mi(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function Bi(t,e,r,i={},n=()=>{}){const{ease:o=Mi,duration:s=300}=i;let a=null;const l=e[t];let u=!1;const h=()=>{u=!0},f=m=>{if(u){n(new Error("Animation cancelled"));return}a===null&&(a=m);const g=Math.min(1,(m-a)/s);if(e[t]=o(g)*(r-l)+l,g>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(f)};return l===r?(n(new Error("Element already at target position")),h):(requestAnimationFrame(f),h)}const Di=["onChange"],ki={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Ui(t){const{onChange:e}=t,r=Ze(t,Di),i=S.useRef(),n=S.useRef(null),o=()=>{i.current=n.current.offsetHeight-n.current.clientHeight};return yi(()=>{const s=_r(()=>{const l=i.current;o(),l!==i.current&&e(i.current)}),a=wr(n.current);return a.addEventListener("resize",s),()=>{s.clear(),a.removeEventListener("resize",s)}},[e]),S.useEffect(()=>{o(),e(i.current)},[e]),J.jsx("div",U({style:ki},r,{ref:n}))}function Pi(t){return Ct("MuiTabScrollButton",t)}const ji=It("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),$i=["className","slots","slotProps","direction","orientation","disabled"],zi=t=>{const{classes:e,orientation:r,disabled:i}=t;return xt({root:["root",r,i&&"disabled"]},Pi,e)},Fi=Re(mr,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.orientation&&e[r.orientation]]}})(({ownerState:t})=>U({width:40,flexShrink:0,opacity:.8,[`&.${ji.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),Vi=S.forwardRef(function(e,r){var i,n;const o=Rt({props:e,name:"MuiTabScrollButton"}),{className:s,slots:a={},slotProps:l={},direction:u}=o,h=Ze(o,$i),f=gr(),m=U({isRtl:f},o),g=zi(m),A=(i=a.StartScrollButtonIcon)!=null?i:Ri,b=(n=a.EndScrollButtonIcon)!=null?n:xi,B=Qe({elementType:A,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:m}),N=Qe({elementType:b,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:m});return J.jsx(Fi,U({component:"div",className:we(g.root,s),ref:r,role:null,ownerState:m,tabIndex:null},h,{children:u==="left"?J.jsx(A,U({},B)):J.jsx(b,U({},N))}))});function qi(t){return Ct("MuiTabs",t)}const ut=It("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Wi=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Gt=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,Xt=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,Ve=(t,e,r)=>{let i=!1,n=r(t,e);for(;n;){if(n===t.firstChild){if(i)return;i=!0}const o=n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||o)n=r(t,n);else{n.focus();return}}},Yi=t=>{const{vertical:e,fixed:r,hideScrollbar:i,scrollableX:n,scrollableY:o,centered:s,scrollButtonsHideMobile:a,classes:l}=t;return xt({root:["root",e&&"vertical"],scroller:["scroller",r&&"fixed",i&&"hideScrollbar",n&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[i&&"hideScrollbar"]},qi,l)},Hi=Re("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[{[`& .${ut.scrollButtons}`]:e.scrollButtons},{[`& .${ut.scrollButtons}`]:r.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,r.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>U({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${ut.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),Ji=Re("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.scroller,r.fixed&&e.fixed,r.hideScrollbar&&e.hideScrollbar,r.scrollableX&&e.scrollableX,r.scrollableY&&e.scrollableY]}})(({ownerState:t})=>U({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Qi=Re("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.flexContainer,r.vertical&&e.flexContainerVertical,r.centered&&e.centered]}})(({ownerState:t})=>U({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),Gi=Re("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>U({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),Xi=Re(Ui)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Kt={},Ki=S.forwardRef(function(e,r){const i=Rt({props:e,name:"MuiTabs"}),n=Ii(),o=gr(),{"aria-label":s,"aria-labelledby":a,action:l,centered:u=!1,children:h,className:f,component:m="div",allowScrollButtonsMobile:g=!1,indicatorColor:A="primary",onChange:b,orientation:B="horizontal",ScrollButtonComponent:N=Vi,scrollButtons:y="auto",selectionFollowsFocus:E,slots:D={},slotProps:$={},TabIndicatorProps:K={},TabScrollButtonProps:ie={},textColor:ne="primary",value:se,variant:I="standard",visibleScrollbar:_=!1}=i,F=Ze(i,Wi),d=I==="scrollable",v=B==="vertical",P=v?"scrollTop":"scrollLeft",C=v?"top":"left",O=v?"bottom":"right",Z=v?"clientHeight":"clientWidth",q=v?"height":"width",W=U({},i,{component:m,allowScrollButtonsMobile:g,indicatorColor:A,orientation:B,vertical:v,scrollButtons:y,textColor:ne,variant:I,visibleScrollbar:_,fixed:!d,hideScrollbar:d&&!_,scrollableX:d&&!v,scrollableY:d&&v,centered:u&&!d,scrollButtonsHideMobile:!g}),X=Yi(W),$e=Qe({elementType:D.StartScrollButtonIcon,externalSlotProps:$.startScrollButtonIcon,ownerState:W}),ii=Qe({elementType:D.EndScrollButtonIcon,externalSlotProps:$.endScrollButtonIcon,ownerState:W}),[kt,ni]=S.useState(!1),[Se,Ut]=S.useState(Kt),[Pt,oi]=S.useState(!1),[jt,si]=S.useState(!1),[$t,ai]=S.useState(!1),[zt,li]=S.useState({overflow:"hidden",scrollbarWidth:0}),Ft=new Map,ue=S.useRef(null),Ee=S.useRef(null),Vt=()=>{const p=ue.current;let w;if(p){const x=p.getBoundingClientRect();w={clientWidth:p.clientWidth,scrollLeft:p.scrollLeft,scrollTop:p.scrollTop,scrollLeftNormalized:Ti(p,o?"rtl":"ltr"),scrollWidth:p.scrollWidth,top:x.top,bottom:x.bottom,left:x.left,right:x.right}}let L;if(p&&se!==!1){const x=Ee.current.children;if(x.length>0){const j=x[Ft.get(se)];L=j?j.getBoundingClientRect():null}}return{tabsMeta:w,tabMeta:L}},Me=lt(()=>{const{tabsMeta:p,tabMeta:w}=Vt();let L=0,x;if(v)x="top",w&&p&&(L=w.top-p.top+p.scrollTop);else if(x=o?"right":"left",w&&p){const Y=o?p.scrollLeftNormalized+p.clientWidth-p.scrollWidth:p.scrollLeft;L=(o?-1:1)*(w[x]-p[x]+Y)}const j={[x]:L,[q]:w?w[q]:0};if(isNaN(Se[x])||isNaN(Se[q]))Ut(j);else{const Y=Math.abs(Se[x]-j[x]),ae=Math.abs(Se[q]-j[q]);(Y>=1||ae>=1)&&Ut(j)}}),ot=(p,{animation:w=!0}={})=>{w?Bi(P,ue.current,p,{duration:n.transitions.duration.standard}):ue.current[P]=p},qt=p=>{let w=ue.current[P];v?w+=p:(w+=p*(o?-1:1),w*=o&&vr()==="reverse"?-1:1),ot(w)},Wt=()=>{const p=ue.current[Z];let w=0;const L=Array.from(Ee.current.children);for(let x=0;x<L.length;x+=1){const j=L[x];if(w+j[Z]>p){x===0&&(w=p);break}w+=j[Z]}return w},ci=()=>{qt(-1*Wt())},ui=()=>{qt(Wt())},fi=S.useCallback(p=>{li({overflow:null,scrollbarWidth:p})},[]),hi=()=>{const p={};p.scrollbarSizeListener=d?J.jsx(Xi,{onChange:fi,className:we(X.scrollableX,X.hideScrollbar)}):null;const L=d&&(y==="auto"&&(Pt||jt)||y===!0);return p.scrollButtonStart=L?J.jsx(N,U({slots:{StartScrollButtonIcon:D.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:$e},orientation:B,direction:o?"right":"left",onClick:ci,disabled:!Pt},ie,{className:we(X.scrollButtons,ie.className)})):null,p.scrollButtonEnd=L?J.jsx(N,U({slots:{EndScrollButtonIcon:D.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:ii},orientation:B,direction:o?"left":"right",onClick:ui,disabled:!jt},ie,{className:we(X.scrollButtons,ie.className)})):null,p},Yt=lt(p=>{const{tabsMeta:w,tabMeta:L}=Vt();if(!(!L||!w)){if(L[C]<w[C]){const x=w[P]+(L[C]-w[C]);ot(x,{animation:p})}else if(L[O]>w[O]){const x=w[P]+(L[O]-w[O]);ot(x,{animation:p})}}}),ze=lt(()=>{d&&y!==!1&&ai(!$t)});S.useEffect(()=>{const p=_r(()=>{ue.current&&Me()});let w;const L=Y=>{Y.forEach(ae=>{ae.removedNodes.forEach(Be=>{var pe;(pe=w)==null||pe.unobserve(Be)}),ae.addedNodes.forEach(Be=>{var pe;(pe=w)==null||pe.observe(Be)})}),p(),ze()},x=wr(ue.current);x.addEventListener("resize",p);let j;return typeof ResizeObserver<"u"&&(w=new ResizeObserver(p),Array.from(Ee.current.children).forEach(Y=>{w.observe(Y)})),typeof MutationObserver<"u"&&(j=new MutationObserver(L),j.observe(Ee.current,{childList:!0})),()=>{var Y,ae;p.clear(),x.removeEventListener("resize",p),(Y=j)==null||Y.disconnect(),(ae=w)==null||ae.disconnect()}},[Me,ze]),S.useEffect(()=>{const p=Array.from(Ee.current.children),w=p.length;if(typeof IntersectionObserver<"u"&&w>0&&d&&y!==!1){const L=p[0],x=p[w-1],j={root:ue.current,threshold:.99},Y=at=>{oi(!at[0].isIntersecting)},ae=new IntersectionObserver(Y,j);ae.observe(L);const Be=at=>{si(!at[0].isIntersecting)},pe=new IntersectionObserver(Be,j);return pe.observe(x),()=>{ae.disconnect(),pe.disconnect()}}},[d,y,$t,h?.length]),S.useEffect(()=>{ni(!0)},[]),S.useEffect(()=>{Me()}),S.useEffect(()=>{Yt(Kt!==Se)},[Yt,Se]),S.useImperativeHandle(l,()=>({updateIndicator:Me,updateScrollButtons:ze}),[Me,ze]);const Ht=J.jsx(Gi,U({},K,{className:we(X.indicator,K.className),ownerState:W,style:U({},Se,K.style)}));let Fe=0;const di=S.Children.map(h,p=>{if(!S.isValidElement(p))return null;const w=p.props.value===void 0?Fe:p.props.value;Ft.set(w,Fe);const L=w===se;return Fe+=1,S.cloneElement(p,U({fullWidth:I==="fullWidth",indicator:L&&!kt&&Ht,selected:L,selectionFollowsFocus:E,onChange:b,textColor:ne,value:w},Fe===1&&se===!1&&!p.props.tabIndex?{tabIndex:0}:{}))}),pi=p=>{const w=Ee.current,L=Ci(w).activeElement;if(L.getAttribute("role")!=="tab")return;let j=B==="horizontal"?"ArrowLeft":"ArrowUp",Y=B==="horizontal"?"ArrowRight":"ArrowDown";switch(B==="horizontal"&&o&&(j="ArrowRight",Y="ArrowLeft"),p.key){case j:p.preventDefault(),Ve(w,L,Xt);break;case Y:p.preventDefault(),Ve(w,L,Gt);break;case"Home":p.preventDefault(),Ve(w,null,Gt);break;case"End":p.preventDefault(),Ve(w,null,Xt);break}},st=hi();return J.jsxs(Hi,U({className:we(X.root,f),ownerState:W,ref:r,as:m},F,{children:[st.scrollButtonStart,st.scrollbarSizeListener,J.jsxs(Ji,{className:X.scroller,ownerState:W,style:{overflow:zt.overflow,[v?`margin${o?"Left":"Right"}`:"marginBottom"]:_?void 0:-zt.scrollbarWidth},ref:ue,children:[J.jsx(Qi,{"aria-label":s,"aria-labelledby":a,"aria-orientation":B==="vertical"?"vertical":null,className:X.flexContainer,ownerState:W,onKeyDown:pi,ref:Ee,role:"tablist",children:di}),kt&&Ht]}),st.scrollButtonEnd]}))}),Zi=Si(J.jsx("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline");var Ae=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},le=[],ee=[],en=typeof Uint8Array<"u"?Uint8Array:Array,Tt=!1;function br(){Tt=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)le[e]=t[e],ee[t.charCodeAt(e)]=e;ee[45]=62,ee[95]=63}function tn(t){Tt||br();var e,r,i,n,o,s,a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=t[a-2]==="="?2:t[a-1]==="="?1:0,s=new en(a*3/4-o),i=o>0?a-4:a;var l=0;for(e=0,r=0;e<i;e+=4,r+=3)n=ee[t.charCodeAt(e)]<<18|ee[t.charCodeAt(e+1)]<<12|ee[t.charCodeAt(e+2)]<<6|ee[t.charCodeAt(e+3)],s[l++]=n>>16&255,s[l++]=n>>8&255,s[l++]=n&255;return o===2?(n=ee[t.charCodeAt(e)]<<2|ee[t.charCodeAt(e+1)]>>4,s[l++]=n&255):o===1&&(n=ee[t.charCodeAt(e)]<<10|ee[t.charCodeAt(e+1)]<<4|ee[t.charCodeAt(e+2)]>>2,s[l++]=n>>8&255,s[l++]=n&255),s}function rn(t){return le[t>>18&63]+le[t>>12&63]+le[t>>6&63]+le[t&63]}function nn(t,e,r){for(var i,n=[],o=e;o<r;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],n.push(rn(i));return n.join("")}function Zt(t){Tt||br();for(var e,r=t.length,i=r%3,n="",o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(nn(t,a,a+s>l?l:a+s));return i===1?(e=t[r-1],n+=le[e>>2],n+=le[e<<4&63],n+="=="):i===2&&(e=(t[r-2]<<8)+t[r-1],n+=le[e>>10],n+=le[e>>4&63],n+=le[e<<2&63],n+="="),o.push(n),o.join("")}function et(t,e,r,i,n){var o,s,a=n*8-i-1,l=(1<<a)-1,u=l>>1,h=-7,f=r?n-1:0,m=r?-1:1,g=t[e+f];for(f+=m,o=g&(1<<-h)-1,g>>=-h,h+=a;h>0;o=o*256+t[e+f],f+=m,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=i;h>0;s=s*256+t[e+f],f+=m,h-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-u}return(g?-1:1)*s*Math.pow(2,o-i)}function yr(t,e,r,i,n,o){var s,a,l,u=o*8-n-1,h=(1<<u)-1,f=h>>1,m=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=i?0:o-1,A=i?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?e+=m/l:e+=m*Math.pow(2,1-f),e*l>=2&&(s++,l/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(e*l-1)*Math.pow(2,n),s=s+f):(a=e*Math.pow(2,f-1)*Math.pow(2,n),s=0));n>=8;t[r+g]=a&255,g+=A,a/=256,n-=8);for(s=s<<n|a,u+=n;u>0;t[r+g]=s&255,g+=A,s/=256,u-=8);t[r+g-A]|=b*128}var on={}.toString,Sr=Array.isArray||function(t){return on.call(t)=="[object Array]"},sn=50;c.TYPED_ARRAY_SUPPORT=Ae.TYPED_ARRAY_SUPPORT!==void 0?Ae.TYPED_ARRAY_SUPPORT:!0;Ge();function Ge(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function fe(t,e){if(Ge()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=c.prototype):(t===null&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Nt(this,t)}return Er(this,t,e,r)}c.poolSize=8192;c._augment=function(t){return t.__proto__=c.prototype,t};function Er(t,e,r,i){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?cn(t,e,r,i):typeof e=="string"?ln(t,e,r):un(t,e)}c.from=function(t,e,r){return Er(null,t,e,r)};c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&c[Symbol.species]);function Ir(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function an(t,e,r,i){return Ir(e),e<=0?fe(t,e):r!==void 0?typeof i=="string"?fe(t,e).fill(r,i):fe(t,e).fill(r):fe(t,e)}c.alloc=function(t,e,r){return an(null,t,e,r)};function Nt(t,e){if(Ir(e),t=fe(t,e<0?0:Ot(e)|0),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}c.allocUnsafe=function(t){return Nt(null,t)};c.allocUnsafeSlow=function(t){return Nt(null,t)};function ln(t,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=Cr(e,r)|0;t=fe(t,i);var n=t.write(e,r);return n!==i&&(t=t.slice(0,n)),t}function bt(t,e){var r=e.length<0?0:Ot(e.length)|0;t=fe(t,r);for(var i=0;i<r;i+=1)t[i]=e[i]&255;return t}function cn(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return r===void 0&&i===void 0?e=new Uint8Array(e):i===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,i),c.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=c.prototype):t=bt(t,e),t}function un(t,e){if(ce(e)){var r=Ot(e.length)|0;return t=fe(t,r),t.length===0||e.copy(t,0,0,r),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Nn(e.length)?fe(t,0):bt(t,e);if(e.type==="Buffer"&&Sr(e.data))return bt(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ot(t){if(t>=Ge())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ge().toString(16)+" bytes");return t|0}c.isBuffer=Q;function ce(t){return!!(t!=null&&t._isBuffer)}c.compare=function(e,r){if(!ce(e)||!ce(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var i=e.length,n=r.length,o=0,s=Math.min(i,n);o<s;++o)if(e[o]!==r[o]){i=e[o],n=r[o];break}return i<n?-1:n<i?1:0};c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};c.concat=function(e,r){if(!Sr(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return c.alloc(0);var i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;var n=c.allocUnsafe(r),o=0;for(i=0;i<e.length;++i){var s=e[i];if(!ce(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n};function Cr(t,e){if(ce(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Xe(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Lr(t).length;default:if(i)return Xe(t).length;e=(""+e).toLowerCase(),i=!0}}c.byteLength=Cr;function fn(t,e,r){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return yn(this,e,r);case"utf8":case"utf-8":return Tr(this,e,r);case"ascii":return vn(this,e,r);case"latin1":case"binary":return bn(this,e,r);case"base64":return _n(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Sn(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}c.prototype._isBuffer=!0;function Ie(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Ie(this,r,r+1);return this};c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Ie(this,r,r+3),Ie(this,r+1,r+2);return this};c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Ie(this,r,r+7),Ie(this,r+1,r+6),Ie(this,r+2,r+5),Ie(this,r+3,r+4);return this};c.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Tr(this,0,e):fn.apply(this,arguments)};c.prototype.equals=function(e){if(!ce(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:c.compare(this,e)===0};c.prototype.inspect=function(){var e="",r=sn;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};c.prototype.compare=function(e,r,i,n,o){if(!ce(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),o===void 0&&(o=this.length),r<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&r>=i)return 0;if(n>=o)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var s=o-n,a=i-r,l=Math.min(s,a),u=this.slice(n,o),h=e.slice(r,i),f=0;f<l;++f)if(u[f]!==h[f]){s=u[f],a=h[f];break}return s<a?-1:a<s?1:0};function Rr(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=c.from(e,i)),ce(e))return e.length===0?-1:er(t,e,r,i,n);if(typeof e=="number")return e=e&255,c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):er(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function er(t,e,r,i,n){var o=1,s=t.length,a=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function l(g,A){return o===1?g[A]:g.readUInt16BE(A*o)}var u;if(n){var h=-1;for(u=r;u<s;u++)if(l(t,u)===l(e,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===a)return h*o}else h!==-1&&(u-=u-h),h=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){for(var f=!0,m=0;m<a;m++)if(l(t,u+m)!==l(e,m)){f=!1;break}if(f)return u}return-1}c.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};c.prototype.indexOf=function(e,r,i){return Rr(this,e,r,i,!0)};c.prototype.lastIndexOf=function(e,r,i){return Rr(this,e,r,i,!1)};function hn(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(s*2,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function dn(t,e,r,i){return it(Xe(e,t.length-r),t,r,i)}function xr(t,e,r,i){return it(xn(e),t,r,i)}function pn(t,e,r,i){return xr(t,e,r,i)}function mn(t,e,r,i){return it(Lr(e),t,r,i)}function gn(t,e,r,i){return it(Tn(e,t.length-r),t,r,i)}c.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(i)?(i=i|0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((i===void 0||i>o)&&(i=o),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return hn(this,e,r,i);case"utf8":case"utf-8":return dn(this,e,r,i);case"ascii":return xr(this,e,r,i);case"latin1":case"binary":return pn(this,e,r,i);case"base64":return mn(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gn(this,e,r,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _n(t,e,r){return e===0&&r===t.length?Zt(t):Zt(t.slice(e,r))}function Tr(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var o=t[n],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n+a<=r){var l,u,h,f;switch(a){case 1:o<128&&(s=o);break;case 2:l=t[n+1],(l&192)===128&&(f=(o&31)<<6|l&63,f>127&&(s=f));break;case 3:l=t[n+1],u=t[n+2],(l&192)===128&&(u&192)===128&&(f=(o&15)<<12|(l&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:l=t[n+1],u=t[n+2],h=t[n+3],(l&192)===128&&(u&192)===128&&(h&192)===128&&(f=(o&15)<<18|(l&63)<<12|(u&63)<<6|h&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),n+=a}return wn(i)}var tr=4096;function wn(t){var e=t.length;if(e<=tr)return String.fromCharCode.apply(String,t);for(var r="",i=0;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=tr));return r}function vn(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function bn(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function yn(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=e;o<r;++o)n+=Rn(t[o]);return n}function Sn(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+i[o+1]*256);return n}c.prototype.slice=function(e,r){var i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);var n;if(c.TYPED_ARRAY_SUPPORT)n=this.subarray(e,r),n.__proto__=c.prototype;else{var o=r-e;n=new c(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+e]}return n};function z(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(e,r,i){e=e|0,r=r|0,i||z(e,r,this.length);for(var n=this[e],o=1,s=0;++s<r&&(o*=256);)n+=this[e+s]*o;return n};c.prototype.readUIntBE=function(e,r,i){e=e|0,r=r|0,i||z(e,r,this.length);for(var n=this[e+--r],o=1;r>0&&(o*=256);)n+=this[e+--r]*o;return n};c.prototype.readUInt8=function(e,r){return r||z(e,1,this.length),this[e]};c.prototype.readUInt16LE=function(e,r){return r||z(e,2,this.length),this[e]|this[e+1]<<8};c.prototype.readUInt16BE=function(e,r){return r||z(e,2,this.length),this[e]<<8|this[e+1]};c.prototype.readUInt32LE=function(e,r){return r||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};c.prototype.readUInt32BE=function(e,r){return r||z(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};c.prototype.readIntLE=function(e,r,i){e=e|0,r=r|0,i||z(e,r,this.length);for(var n=this[e],o=1,s=0;++s<r&&(o*=256);)n+=this[e+s]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*r)),n};c.prototype.readIntBE=function(e,r,i){e=e|0,r=r|0,i||z(e,r,this.length);for(var n=r,o=1,s=this[e+--n];n>0&&(o*=256);)s+=this[e+--n]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};c.prototype.readInt8=function(e,r){return r||z(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};c.prototype.readInt16LE=function(e,r){r||z(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};c.prototype.readInt16BE=function(e,r){r||z(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};c.prototype.readInt32LE=function(e,r){return r||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};c.prototype.readInt32BE=function(e,r){return r||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};c.prototype.readFloatLE=function(e,r){return r||z(e,4,this.length),et(this,e,!0,23,4)};c.prototype.readFloatBE=function(e,r){return r||z(e,4,this.length),et(this,e,!1,23,4)};c.prototype.readDoubleLE=function(e,r){return r||z(e,8,this.length),et(this,e,!0,52,8)};c.prototype.readDoubleBE=function(e,r){return r||z(e,8,this.length),et(this,e,!1,52,8)};function G(t,e,r,i,n,o){if(!ce(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r|0,i=i|0,!n){var o=Math.pow(2,8*i)-1;G(this,e,r,i,o,0)}var s=1,a=0;for(this[r]=e&255;++a<i&&(s*=256);)this[r+a]=e/s&255;return r+i};c.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r|0,i=i|0,!n){var o=Math.pow(2,8*i)-1;G(this,e,r,i,o,0)}var s=i-1,a=1;for(this[r+s]=e&255;--s>=0&&(a*=256);)this[r+s]=e/a&255;return r+i};c.prototype.writeUInt8=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function tt(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-r,2);n<o;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>(i?n:1-n)*8}c.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):tt(this,e,r,!0),r+2};c.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):tt(this,e,r,!1),r+2};function rt(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-r,4);n<o;++n)t[r+n]=e>>>(i?n:3-n)*8&255}c.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):rt(this,e,r,!0),r+4};c.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):rt(this,e,r,!1),r+4};c.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r|0,!n){var o=Math.pow(2,8*i-1);G(this,e,r,i,o-1,-o)}var s=0,a=1,l=0;for(this[r]=e&255;++s<i&&(a*=256);)e<0&&l===0&&this[r+s-1]!==0&&(l=1),this[r+s]=(e/a>>0)-l&255;return r+i};c.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r|0,!n){var o=Math.pow(2,8*i-1);G(this,e,r,i,o-1,-o)}var s=i-1,a=1,l=0;for(this[r+s]=e&255;--s>=0&&(a*=256);)e<0&&l===0&&this[r+s+1]!==0&&(l=1),this[r+s]=(e/a>>0)-l&255;return r+i};c.prototype.writeInt8=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};c.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):tt(this,e,r,!0),r+2};c.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):tt(this,e,r,!1),r+2};c.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):rt(this,e,r,!0),r+4};c.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r|0,i||G(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):rt(this,e,r,!1),r+4};function Nr(t,e,r,i,n,o){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Or(t,e,r,i,n){return n||Nr(t,e,r,4),yr(t,e,r,i,23,4),r+4}c.prototype.writeFloatLE=function(e,r,i){return Or(this,e,r,!0,i)};c.prototype.writeFloatBE=function(e,r,i){return Or(this,e,r,!1,i)};function Ar(t,e,r,i,n){return n||Nr(t,e,r,8),yr(t,e,r,i,52,8),r+8}c.prototype.writeDoubleLE=function(e,r,i){return Ar(this,e,r,!0,i)};c.prototype.writeDoubleBE=function(e,r,i){return Ar(this,e,r,!1,i)};c.prototype.copy=function(e,r,i,n){if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);var o=n-i,s;if(this===e&&i<r&&r<n)for(s=o-1;s>=0;--s)e[s+r]=this[s+i];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)e[s+r]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),r);return o};c.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{var a=ce(e)?e:Xe(new c(e,n).toString()),l=a.length;for(s=0;s<i-r;++s)this[s+r]=a[s%l]}return this};var En=/[^+\/0-9A-Za-z-_]/g;function In(t){if(t=Cn(t).replace(En,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Cn(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Rn(t){return t<16?"0"+t.toString(16):t.toString(16)}function Xe(t,e){e=e||1/0;for(var r,i=t.length,n=null,o=[],s=0;s<i;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function xn(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Tn(t,e){for(var r,i,n,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),i=r>>8,n=r%256,o.push(n),o.push(i);return o}function Lr(t){return tn(In(t))}function it(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Nn(t){return t!==t}function Q(t){return t!=null&&(!!t._isBuffer||Mr(t)||On(t))}function Mr(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function On(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&Mr(t.slice(0,0))}var ft;function be(){}be.prototype=Object.create(null);function R(){R.init.call(this)}R.EventEmitter=R;R.usingDomains=!1;R.prototype.domain=void 0;R.prototype._events=void 0;R.prototype._maxListeners=void 0;R.defaultMaxListeners=10;R.init=function(){this.domain=null,R.usingDomains&&ft.active&&!(this instanceof ft.Domain)&&(this.domain=ft.active),(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new be,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};R.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function Br(t){return t._maxListeners===void 0?R.defaultMaxListeners:t._maxListeners}R.prototype.getMaxListeners=function(){return Br(this)};function An(t,e,r){if(e)t.call(r);else for(var i=t.length,n=Ue(t,i),o=0;o<i;++o)n[o].call(r)}function Ln(t,e,r,i){if(e)t.call(r,i);else for(var n=t.length,o=Ue(t,n),s=0;s<n;++s)o[s].call(r,i)}function Mn(t,e,r,i,n){if(e)t.call(r,i,n);else for(var o=t.length,s=Ue(t,o),a=0;a<o;++a)s[a].call(r,i,n)}function Bn(t,e,r,i,n,o){if(e)t.call(r,i,n,o);else for(var s=t.length,a=Ue(t,s),l=0;l<s;++l)a[l].call(r,i,n,o)}function Dn(t,e,r,i){if(e)t.apply(r,i);else for(var n=t.length,o=Ue(t,n),s=0;s<n;++s)o[s].apply(r,i)}R.prototype.emit=function(e){var r,i,n,o,s,a,l,u=e==="error";if(a=this._events,a)u=u&&a.error==null;else if(!u)return!1;if(l=this.domain,u){if(r=arguments[1],l)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=l,r.domainThrown=!1,l.emit("error",r);else{if(r instanceof Error)throw r;var h=new Error('Uncaught, unspecified "error" event. ('+r+")");throw h.context=r,h}return!1}if(i=a[e],!i)return!1;var f=typeof i=="function";switch(n=arguments.length,n){case 1:An(i,f,this);break;case 2:Ln(i,f,this,arguments[1]);break;case 3:Mn(i,f,this,arguments[1],arguments[2]);break;case 4:Bn(i,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(n-1),s=1;s<n;s++)o[s-1]=arguments[s];Dn(i,f,this,o)}return!0};function Dr(t,e,r,i){var n,o,s;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(o=t._events,o?(o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]):(o=t._events=new be,t._eventsCount=0),!s)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),!s.warned&&(n=Br(t),n&&n>0&&s.length>n)){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,kn(a)}return t}function kn(t){typeof console.warn=="function"?console.warn(t):console.log(t)}R.prototype.addListener=function(e,r){return Dr(this,e,r,!1)};R.prototype.on=R.prototype.addListener;R.prototype.prependListener=function(e,r){return Dr(this,e,r,!0)};function kr(t,e,r){var i=!1;function n(){t.removeListener(e,n),i||(i=!0,r.apply(t,arguments))}return n.listener=r,n}R.prototype.once=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,kr(this,e,r)),this};R.prototype.prependOnceListener=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,kr(this,e,r)),this};R.prototype.removeListener=function(e,r){var i,n,o,s,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(n=this._events,!n)return this;if(i=n[e],!i)return this;if(i===r||i.listener&&i.listener===r)--this._eventsCount===0?this._events=new be:(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(o=-1,s=i.length;s-- >0;)if(i[s]===r||i[s].listener&&i[s].listener===r){a=i[s].listener,o=s;break}if(o<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new be,this;delete n[e]}else Un(i,o);n.removeListener&&this.emit("removeListener",e,a||r)}return this};R.prototype.removeAllListeners=function(e){var r,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new be,this._eventsCount=0):i[e]&&(--this._eventsCount===0?this._events=new be:delete i[e]),this;if(arguments.length===0){for(var n=Object.keys(i),o=0,s;o<n.length;++o)s=n[o],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=new be,this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r)do this.removeListener(e,r[r.length-1]);while(r[0]);return this};R.prototype.listeners=function(e){var r,i,n=this._events;return n?(r=n[e],r?typeof r=="function"?i=[r.listener||r]:i=Pn(r):i=[]):i=[],i};R.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ur.call(t,e)};R.prototype.listenerCount=Ur;function Ur(t){var e=this._events;if(e){var r=e[t];if(typeof r=="function")return 1;if(r)return r.length}return 0}R.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Un(t,e){for(var r=e,i=r+1,n=t.length;i<n;r+=1,i+=1)t[r]=t[i];t.pop()}function Ue(t,e){for(var r=new Array(e);e--;)r[e]=t[e];return r}function Pn(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Pr(){throw new Error("setTimeout has not been defined")}function jr(){throw new Error("clearTimeout has not been defined")}var ge=Pr,_e=jr;typeof Ae.setTimeout=="function"&&(ge=setTimeout);typeof Ae.clearTimeout=="function"&&(_e=clearTimeout);function $r(t){if(ge===setTimeout)return setTimeout(t,0);if((ge===Pr||!ge)&&setTimeout)return ge=setTimeout,setTimeout(t,0);try{return ge(t,0)}catch{try{return ge.call(null,t,0)}catch{return ge.call(this,t,0)}}}function jn(t){if(_e===clearTimeout)return clearTimeout(t);if((_e===jr||!_e)&&clearTimeout)return _e=clearTimeout,clearTimeout(t);try{return _e(t)}catch{try{return _e.call(null,t)}catch{return _e.call(this,t)}}}var he=[],Oe=!1,Ce,He=-1;function $n(){!Oe||!Ce||(Oe=!1,Ce.length?he=Ce.concat(he):He=-1,he.length&&zr())}function zr(){if(!Oe){var t=$r($n);Oe=!0;for(var e=he.length;e;){for(Ce=he,he=[];++He<e;)Ce&&Ce[He].run();He=-1,e=he.length}Ce=null,Oe=!1,jn(t)}}function re(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];he.push(new Fr(t,e)),he.length===1&&!Oe&&$r(zr)}function Fr(t,e){this.fun=t,this.array=e}Fr.prototype.run=function(){this.fun.apply(null,this.array)};var zn={},De=Ae.performance||{};De.now||De.mozNow||De.msNow||De.oNow||De.webkitNow;var Je={env:zn},yt;typeof Object.create=="function"?yt=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:yt=function(e,r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e};var Le=yt,Fn=/%[sdj%]/g;function Vn(t){if(!Lt(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(ye(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,n=i.length,o=String(t).replace(Fn,function(a){if(a==="%%")return"%";if(r>=n)return a;switch(a){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch{return"[Circular]"}default:return a}}),s=i[r];r<n;s=i[++r])At(s)||!Pe(s)?o+=" "+s:o+=" "+ye(s);return o}function Vr(t,e){if(ve(Ae.process))return function(){return Vr(t,e).apply(this,arguments)};if(Je.noDeprecation===!0)return t;var r=!1;function i(){if(!r){if(Je.throwDeprecation)throw new Error(e);Je.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return i}var qe={},ht;function qn(t){if(ve(ht)&&(ht=Je.env.NODE_DEBUG||""),t=t.toUpperCase(),!qe[t])if(new RegExp("\\b"+t+"\\b","i").test(ht)){var e=0;qe[t]=function(){var r=Vn.apply(null,arguments);console.error("%s %d: %s",t,e,r)}}else qe[t]=function(){};return qe[t]}function ye(t,e){var r={seen:[],stylize:Yn};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),qr(e)?r.showHidden=e:e&&Zn(r,e),ve(r.showHidden)&&(r.showHidden=!1),ve(r.depth)&&(r.depth=2),ve(r.colors)&&(r.colors=!1),ve(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Wn),Ke(r,t,r.depth)}ye.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};ye.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Wn(t,e){var r=ye.styles[e];return r?"\x1B["+ye.colors[r][0]+"m"+t+"\x1B["+ye.colors[r][1]+"m":t}function Yn(t,e){return t}function Hn(t){var e={};return t.forEach(function(r,i){e[r]=!0}),e}function Ke(t,e,r){if(t.customInspect&&e&&gt(e.inspect)&&e.inspect!==ye&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(r,t);return Lt(i)||(i=Ke(t,i,r)),i}var n=Jn(t,e);if(n)return n;var o=Object.keys(e),s=Hn(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),mt(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return dt(e);if(o.length===0){if(gt(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(pt(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(rr(e))return t.stylize(Date.prototype.toString.call(e),"date");if(mt(e))return dt(e)}var l="",u=!1,h=["{","}"];if(Xn(e)&&(u=!0,h=["[","]"]),gt(e)){var f=e.name?": "+e.name:"";l=" [Function"+f+"]"}if(pt(e)&&(l=" "+RegExp.prototype.toString.call(e)),rr(e)&&(l=" "+Date.prototype.toUTCString.call(e)),mt(e)&&(l=" "+dt(e)),o.length===0&&(!u||e.length==0))return h[0]+l+h[1];if(r<0)return pt(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var m;return u?m=Qn(t,e,r,s,o):m=o.map(function(g){return St(t,e,r,s,g,u)}),t.seen.pop(),Gn(m,l,h)}function Jn(t,e){if(ve(e))return t.stylize("undefined","undefined");if(Lt(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Kn(e))return t.stylize(""+e,"number");if(qr(e))return t.stylize(""+e,"boolean");if(At(e))return t.stylize("null","null")}function dt(t){return"["+Error.prototype.toString.call(t)+"]"}function Qn(t,e,r,i,n){for(var o=[],s=0,a=e.length;s<a;++s)Wr(e,String(s))?o.push(St(t,e,r,i,String(s),!0)):o.push("");return n.forEach(function(l){l.match(/^\d+$/)||o.push(St(t,e,r,i,l,!0))}),o}function St(t,e,r,i,n,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},l.get?l.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),Wr(i,n)||(s="["+n+"]"),a||(t.seen.indexOf(l.value)<0?(At(r)?a=Ke(t,l.value,null):a=Ke(t,l.value,r-1),a.indexOf(`
`)>-1&&(o?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=t.stylize("[Circular]","special")),ve(s)){if(o&&n.match(/^\d+$/))return a;s=JSON.stringify(""+n),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function Gn(t,e,r){var i=t.reduce(function(n,o){return o.indexOf(`
`)>=0,n+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function Xn(t){return Array.isArray(t)}function qr(t){return typeof t=="boolean"}function At(t){return t===null}function Kn(t){return typeof t=="number"}function Lt(t){return typeof t=="string"}function ve(t){return t===void 0}function pt(t){return Pe(t)&&Mt(t)==="[object RegExp]"}function Pe(t){return typeof t=="object"&&t!==null}function rr(t){return Pe(t)&&Mt(t)==="[object Date]"}function mt(t){return Pe(t)&&(Mt(t)==="[object Error]"||t instanceof Error)}function gt(t){return typeof t=="function"}function Mt(t){return Object.prototype.toString.call(t)}function Zn(t,e){if(!e||!Pe(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t}function Wr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xe(){this.head=null,this.tail=null,this.length=0}xe.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};xe.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};xe.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};xe.prototype.clear=function(){this.head=this.tail=null,this.length=0};xe.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r};xe.prototype.concat=function(t){if(this.length===0)return c.alloc(0);if(this.length===1)return this.head.data;for(var e=c.allocUnsafe(t>>>0),r=this.head,i=0;r;)r.data.copy(e,i),i+=r.data.length,r=r.next;return e};var eo=c.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function to(t){if(t&&!eo(t))throw new Error("Unknown encoding: "+t)}function je(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),to(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=io;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=no;break;default:this.write=ro;return}this.charBuffer=new c(6),this.charReceived=0,this.charLength=0}je.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(n>=55296&&n<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e};je.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(e==1&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e};je.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,i=this.charBuffer,n=this.encoding;e+=i.slice(0,r).toString(n)}return e};function ro(t){return t.toString(this.encoding)}function io(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function no(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}k.ReadableState=Yr;var M=qn("stream");Le(k,R);function oo(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function so(t,e){return t.listeners(e).length}function Yr(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof te&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new xe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new je(t.encoding),this.encoding=t.encoding)}function k(t){if(!(this instanceof k))return new k(t);this._readableState=new Yr(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),R.call(this)}k.prototype.push=function(t,e){var r=this._readableState;return!r.objectMode&&typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=c.from(t,e),e="")),Hr(this,r,t,e,!1)};k.prototype.unshift=function(t){var e=this._readableState;return Hr(this,e,t,"",!0)};k.prototype.isPaused=function(){return this._readableState.flowing===!1};function Hr(t,e,r,i,n){var o=co(e,r);if(o)t.emit("error",o);else if(r===null)e.reading=!1,uo(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!n){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&n){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else{var l;e.decoder&&!n&&!i&&(r=e.decoder.write(r),l=!e.objectMode&&r.length===0),n||(e.reading=!1),l||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&nt(t))),fo(t,e)}else n||(e.reading=!1);return ao(e)}function ao(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}k.prototype.setEncoding=function(t){return this._readableState.decoder=new je(t),this._readableState.encoding=t,this};var ir=8388608;function lo(t){return t>=ir?t=ir:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function nr(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=lo(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}k.prototype.read=function(t){M("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return M("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?_t(this):nt(this),null;if(t=nr(t,e),t===0&&e.ended)return e.length===0&&_t(this),null;var i=e.needReadable;M("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,M("length less than watermark",i)),e.ended||e.reading?(i=!1,M("reading or ended",i)):i&&(M("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=nr(r,e)));var n;return t>0?n=Jr(t,e):n=null,n===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&_t(this)),n!==null&&this.emit("data",n),n};function co(t,e){var r=null;return!Q(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function uo(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,nt(t)}}function nt(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(M("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?re(or,t):or(t))}function or(t){M("emit readable"),t.emit("readable"),Bt(t)}function fo(t,e){e.readingMore||(e.readingMore=!0,re(ho,t,e))}function ho(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(M("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}k.prototype._read=function(t){this.emit("error",new Error("not implemented"))};k.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,M("pipe count=%d opts=%j",i.pipesCount,e);var n=!e||e.end!==!1,o=n?a:h;i.endEmitted?re(o):r.once("end",o),t.on("unpipe",s);function s(N){M("onunpipe"),N===r&&h()}function a(){M("onend"),t.end()}var l=po(r);t.on("drain",l);var u=!1;function h(){M("cleanup"),t.removeListener("close",A),t.removeListener("finish",b),t.removeListener("drain",l),t.removeListener("error",g),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",h),r.removeListener("data",m),u=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var f=!1;r.on("data",m);function m(N){M("ondata"),f=!1;var y=t.write(N);y===!1&&!f&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&Qr(i.pipes,t)!==-1)&&!u&&(M("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function g(N){M("onerror",N),B(),t.removeListener("error",g),so(t,"error")===0&&t.emit("error",N)}oo(t,"error",g);function A(){t.removeListener("finish",b),B()}t.once("close",A);function b(){M("onfinish"),t.removeListener("close",A),B()}t.once("finish",b);function B(){M("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(M("pipe resume"),r.resume()),t};function po(t){return function(){var e=t._readableState;M("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,Bt(t))}}k.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var n=0;n<i;n++)r[n].emit("unpipe",this);return this}var o=Qr(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};k.prototype.on=function(t,e){var r=R.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&nt(this):re(mo,this))}return r};k.prototype.addListener=k.prototype.on;function mo(t){M("readable nexttick read 0"),t.read(0)}k.prototype.resume=function(){var t=this._readableState;return t.flowing||(M("resume"),t.flowing=!0,go(this,t)),this};function go(t,e){e.resumeScheduled||(e.resumeScheduled=!0,re(_o,t,e))}function _o(t,e){e.reading||(M("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Bt(t),e.flowing&&!e.reading&&t.read(0)}k.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Bt(t){var e=t._readableState;for(M("flow",e.flowing);e.flowing&&t.read()!==null;);}k.prototype.wrap=function(t){var e=this._readableState,r=!1,i=this;t.on("end",function(){if(M("wrapped end"),e.decoder&&!e.ended){var s=e.decoder.end();s&&s.length&&i.push(s)}i.push(null)}),t.on("data",function(s){if(M("wrapped data"),e.decoder&&(s=e.decoder.write(s)),!(e.objectMode&&s==null)&&!(!e.objectMode&&(!s||!s.length))){var a=i.push(s);a||(r=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=(function(s){return function(){return t[s].apply(t,arguments)}})(n));var o=["error","close","destroy","pause","resume"];return So(o,function(s){t.on(s,i.emit.bind(i,s))}),i._read=function(s){M("wrapped _read",s),r&&(r=!1,t.resume())},i};k._fromList=Jr;function Jr(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=wo(t,e.buffer,e.decoder),r}function wo(t,e,r){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?i=e.shift():i=r?vo(t,e):bo(t,e),i}function vo(t,e){var r=e.head,i=1,n=r.data;for(t-=n.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?n+=o:n+=o.slice(0,t),t-=s,t===0){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}function bo(t,e){var r=c.allocUnsafe(t),i=e.head,n=1;for(i.data.copy(r),t-=i.data.length;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),t-=s,t===0){s===o.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(s));break}++n}return e.length-=n,r}function _t(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,re(yo,e,t))}function yo(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function So(t,e){for(var r=0,i=t.length;r<i;r++)e(t[r],r)}function Qr(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}V.WritableState=Dt;Le(V,R);function Eo(){}function Io(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function Dt(t,e){Object.defineProperty(this,"buffer",{get:Vr(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof te&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){Ao(e,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Zr(this)}Dt.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};function V(t){if(!(this instanceof V)&&!(this instanceof te))return new V(t);this._writableState=new Dt(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),R.call(this)}V.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Co(t,e){var r=new Error("write after end");t.emit("error",r),re(e,r)}function Ro(t,e,r,i){var n=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):!c.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),re(i,o),n=!1),n}V.prototype.write=function(t,e,r){var i=this._writableState,n=!1;return typeof e=="function"&&(r=e,e=null),c.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=Eo),i.ended?Co(this,r):Ro(this,i,t,r)&&(i.pendingcb++,n=To(this,i,t,e,r)),n};V.prototype.cork=function(){var t=this._writableState;t.corked++};V.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&Gr(this,t))};V.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function xo(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=c.from(e,r)),e}function To(t,e,r,i,n){r=xo(e,r,i),c.isBuffer(r)&&(i="buffer");var o=e.objectMode?1:r.length;e.length+=o;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var a=e.lastBufferedRequest;e.lastBufferedRequest=new Io(r,i,n),a?a.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Et(t,e,!1,o,r,i,n);return s}function Et(t,e,r,i,n,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function No(t,e,r,i,n){--e.pendingcb,r?re(n,i):n(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function Oo(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Ao(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(Oo(r),e)No(t,r,i,e,n);else{var o=Xr(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Gr(t,r),i?re(sr,t,r,o,n):sr(t,r,o,n)}}function sr(t,e,r,i){r||Lo(t,e),e.pendingcb--,i(),Kr(t,e)}function Lo(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Gr(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),o=e.corkedRequestsFree;o.entry=r;for(var s=0;r;)n[s]=r,r=r.next,s+=1;Et(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Zr(e)}else{for(;r;){var a=r.chunk,l=r.encoding,u=r.callback,h=e.objectMode?1:a.length;if(Et(t,e,!1,h,a,l,u),r=r.next,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}V.prototype._write=function(t,e,r){r(new Error("not implemented"))};V.prototype._writev=null;V.prototype.end=function(t,e,r){var i=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&Mo(this,i,r)};function Xr(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function ar(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function Kr(t,e){var r=Xr(e);return r&&(e.pendingcb===0?(ar(t,e),e.finished=!0,t.emit("finish")):ar(t,e)),r}function Mo(t,e,r){e.ending=!0,Kr(t,e),r&&(e.finished?re(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Zr(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}Le(te,k);var lr=Object.keys(V.prototype);for(var wt=0;wt<lr.length;wt++){var vt=lr[wt];te.prototype[vt]||(te.prototype[vt]=V.prototype[vt])}function te(t){if(!(this instanceof te))return new te(t);k.call(this,t),V.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Bo)}function Bo(){this.allowHalfOpen||this._writableState.ended||re(Do,this)}function Do(t){t.end()}Le(oe,te);function ko(t){this.afterTransform=function(e,r){return Uo(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Uo(t,e,r){var i=t._transformState;i.transforming=!1;var n=i.writecb;if(!n)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,r!=null&&t.push(r),n(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function oe(t){if(!(this instanceof oe))return new oe(t);te.call(this,t),this._transformState=new ko(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){cr(e,r)}):cr(e)})}oe.prototype.push=function(t,e){return this._transformState.needTransform=!1,te.prototype.push.call(this,t,e)};oe.prototype._transform=function(t,e,r){throw new Error("Not implemented")};oe.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};oe.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function cr(t,e){if(e)return t.emit("error",e);var r=t._writableState,i=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}Le(ke,oe);function ke(t){if(!(this instanceof ke))return new ke(t);oe.call(this,t)}ke.prototype._transform=function(t,e,r){r(null,t)};Le(de,R);de.Readable=k;de.Writable=V;de.Duplex=te;de.Transform=oe;de.PassThrough=ke;de.Stream=de;function de(){R.call(this)}de.prototype.pipe=function(t,e){var r=this;function i(h){t.writable&&t.write(h)===!1&&r.pause&&r.pause()}r.on("data",i);function n(){r.readable&&r.resume&&r.resume()}t.on("drain",n),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));var o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function l(h){if(u(),R.listenerCount(this,"error")===0)throw h}r.on("error",l),t.on("error",l);function u(){r.removeListener("data",i),t.removeListener("drain",n),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};const ei=function(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)};class T extends Error{constructor(e,r,i,...n){Array.isArray(r)&&(r=r.join(" ").trim()),super(r),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,T),this.code=e;for(const o of n)for(const s in o){const a=o[s];this[s]=Q(a)?a.toString(i.encoding):a==null?a:JSON.parse(JSON.stringify(a))}}}const ti=function(t){const e=[];for(let r=0,i=t.length;r<i;r++){const n=t[r];if(n==null||n===!1)e[r]={disabled:!0};else if(typeof n=="string")e[r]={name:n};else if(ei(n)){if(typeof n.name!="string")throw new T("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${r}`,"when column is an object literal"]);e[r]=n}else throw new T("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(n)} at position ${r}`])}return e};class ur{constructor(e=100){this.size=e,this.length=0,this.buf=c.allocUnsafe(e)}prepend(e){if(Q(e)){const r=this.length+e.length;if(r>=this.size&&(this.resize(),r>=this.size))throw Error("INVALID_BUFFER_STATE");const i=this.buf;this.buf=c.allocUnsafe(this.size),e.copy(this.buf,0),i.copy(this.buf,e.length),this.length+=e.length}else{const r=this.length++;r===this.size&&this.resize();const i=this.clone();this.buf[0]=e,i.copy(this.buf,1,0,r)}}append(e){const r=this.length++;r===this.size&&this.resize(),this.buf[r]=e}clone(){return c.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const r=c.allocUnsafe(this.size);this.buf.copy(r,0,0,e),this.buf=r}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Po=12,jo=13,$o=10,zo=32,Fo=9,Vo=function(t){return{bomSkipped:!1,bufBytesStart:0,castField:t.cast_function,commenting:!1,error:void 0,enabled:t.from_line===1,escaping:!1,escapeIsQuote:Q(t.escape)&&Q(t.quote)&&c.compare(t.escape,t.quote)===0,expectedRecordLength:Array.isArray(t.columns)?t.columns.length:void 0,field:new ur(20),firstLineToHeaders:t.cast_first_line_to_header,needMoreDataSize:Math.max(t.comment!==null?t.comment.length:0,...t.delimiter.map(e=>e.length),t.quote!==null?t.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new ur(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:t.record_delimiter.length===0?0:Math.max(...t.record_delimiter.map(e=>e.length)),trimChars:[c.from(" ",t.encoding)[0],c.from("	",t.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[c.from(c.from([jo],"utf8").toString(),t.encoding),c.from(c.from([$o],"utf8").toString(),t.encoding),c.from(c.from([Po],"utf8").toString(),t.encoding),c.from(c.from([zo],"utf8").toString(),t.encoding),c.from(c.from([Fo],"utf8").toString(),t.encoding)]}},qo=function(t){return t.replace(/([A-Z])/g,function(e,r){return"_"+r.toLowerCase()})},fr=function(t){const e={};for(const i in t)e[qo(i)]=t[i];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new T("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new T("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new T("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(i){const n=Date.parse(i);return isNaN(n)?i:new Date(n)};else if(typeof e.cast_date!="function")throw new T("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=void 0,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=ti(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new T("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new T("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new T("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=c.from(e.comment,e.encoding)),!Q(e.comment))throw new T("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new T("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);const r=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new T("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${r}`],e);if(e.delimiter=e.delimiter.map(function(i){if(i==null||i===!1)return c.from(",",e.encoding);if(typeof i=="string"&&(i=c.from(i,e.encoding)),!Q(i)||i.length===0)throw new T("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${r}`],e);return i}),e.escape===void 0||e.escape===!0?e.escape=c.from('"',e.encoding):typeof e.escape=="string"?e.escape=c.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!Q(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(t.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(t.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(t.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new T("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new T("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(Q(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new T("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=c.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=c.from(e.quote,e.encoding)),!Q(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||Q(e.record_delimiter)){if(e.record_delimiter.length===0)throw new T("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new T("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(i,n){if(typeof i!="string"&&!Q(i))throw new T("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${n},`,`got ${JSON.stringify(i)}`],e);if(i.length===0)throw new T("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${n},`,`got ${JSON.stringify(i)}`],e);return typeof i=="string"&&(i=c.from(i,e.encoding)),i}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&t.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&t.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(e.to!==-1)if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(t.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(t.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(e.to_line!==-1)if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(t.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(t.to_line)}`);return e},hr=function(t){return t.every(e=>e==null||e.toString&&e.toString().trim()==="")},Wo=13,Yo=10,Ne={utf8:c.from([239,187,191]),utf16le:c.from([255,254])},Ho=function(t={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},r=fr(t);return{info:e,original_options:t,options:r,state:Vo(r),__needMoreData:function(i,n,o){if(o)return!1;const{encoding:s,escape:a,quote:l}=this.options,{quoting:u,needMoreDataSize:h,recordDelimiterMaxLength:f}=this.state,m=n-i-1,g=Math.max(h,f===0?c.from(`\r
`,s).length:f,u?(a===null?0:a.length)+l.length:0,u?l.length+f:0);return m<g},parse:function(i,n,o,s){const{bom:a,comment_no_infix:l,encoding:u,from_line:h,ltrim:f,max_record_size:m,raw:g,relax_quotes:A,rtrim:b,skip_empty_lines:B,to:N,to_line:y}=this.options;let{comment:E,escape:D,quote:$,record_delimiter:K}=this.options;const{bomSkipped:ie,previousBuf:ne,rawBuffer:se,escapeIsQuote:I}=this.state;let _;if(ne===void 0)if(i===void 0){s();return}else _=i;else ne!==void 0&&i===void 0?_=ne:_=c.concat([ne,i]);if(ie===!1)if(a===!1)this.state.bomSkipped=!0;else if(_.length<3){if(n===!1){this.state.previousBuf=_;return}}else{for(const v in Ne)if(Ne[v].compare(_,0,Ne[v].length)===0){const P=Ne[v].length;this.state.bufBytesStart+=P,_=_.slice(P);const C=fr({...this.original_options,encoding:v});for(const O in C)this.options[O]=C[O];({comment:E,escape:D,quote:$}=this.options);break}this.state.bomSkipped=!0}const F=_.length;let d;for(d=0;d<F&&!this.__needMoreData(d,F,n);d++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),y!==-1&&this.info.lines>y){this.state.stop=!0,s();return}this.state.quoting===!1&&K.length===0&&this.__autoDiscoverRecordDelimiter(_,d)&&(K=this.options.record_delimiter);const v=_[d];if(g===!0&&se.append(v),(v===Wo||v===Yo)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(D!==null&&this.state.quoting===!0&&this.__isEscape(_,d,v)&&d+D.length<F)if(I){if(this.__isQuote(_,d+D.length)){this.state.escaping=!0,d+=D.length-1;continue}}else{this.state.escaping=!0,d+=D.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(_,d))if(this.state.quoting===!0){const O=_[d+$.length],Z=b&&this.__isCharTrimable(_,d+$.length),q=E!==null&&this.__compareBytes(E,_,d+$.length,O),W=this.__isDelimiter(_,d+$.length,O),X=K.length===0?this.__autoDiscoverRecordDelimiter(_,d+$.length):this.__isRecordDelimiter(O,_,d+$.length);if(D!==null&&this.__isEscape(_,d,v)&&this.__isQuote(_,d+D.length))d+=D.length-1;else if(!O||W||X||q||Z){this.state.quoting=!1,this.state.wasQuoting=!0,d+=$.length-1;continue}else if(A===!1){const $e=this.__error(new T("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(O)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if($e!==void 0)return $e}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend($),d+=$.length-1}else if(this.state.field.length!==0){if(A===!1){const O=this.__infoField(),Z=Object.keys(Ne).map(W=>Ne[W].equals(this.state.field.toString())?W:!1).filter(Boolean)[0],q=this.__error(new T("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(O.column)} at line ${O.lines}, value is ${JSON.stringify(this.state.field.toString(u))}`,Z?`(${Z} bom)`:void 0],this.options,O,{field:this.state.field}));if(q!==void 0)return q}}else{this.state.quoting=!0,d+=$.length-1;continue}if(this.state.quoting===!1){const O=this.__isRecordDelimiter(v,_,d);if(O!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=h){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),d+=O-1;continue}if(B===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,d+=O-1;continue}this.info.bytes=this.state.bufBytesStart+d;const W=this.__onField();if(W!==void 0)return W;this.info.bytes=this.state.bufBytesStart+d+O;const X=this.__onRecord(o);if(X!==void 0)return X;if(N!==-1&&this.info.records>=N){this.state.stop=!0,s();return}}this.state.commenting=!1,d+=O-1;continue}if(this.state.commenting)continue;if(E!==null&&(l===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(E,_,d,v)!==0){this.state.commenting=!0;continue}const Z=this.__isDelimiter(_,d,v);if(Z!==0){this.info.bytes=this.state.bufBytesStart+d;const q=this.__onField();if(q!==void 0)return q;d+=Z-1;continue}}}if(this.state.commenting===!1&&m!==0&&this.state.record_length+this.state.field.length>m)return this.__error(new T("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${m}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const P=f===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(_,d),C=b===!1||this.state.wasQuoting===!1;if(P===!0&&C===!0)this.state.field.append(v);else{if(b===!0&&!this.__isCharTrimable(_,d))return this.__error(new T("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));P===!1&&(d+=this.__isCharTrimable(_,d)-1);continue}}if(n===!0)if(this.state.quoting===!0){const v=this.__error(new T("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(v!==void 0)return v}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+d;const v=this.__onField();if(v!==void 0)return v;const P=this.__onRecord(o);if(P!==void 0)return P}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=d,this.state.previousBuf=_.slice(d);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(i){const{columns:n,group_columns_by_name:o,encoding:s,info:a,from:l,relax_column_count:u,relax_column_count_less:h,relax_column_count_more:f,raw:m,skip_records_with_empty_values:g}=this.options,{enabled:A,record:b}=this.state;if(A===!1)return this.__resetRecord();const B=b.length;if(n===!0){if(g===!0&&hr(b)){this.__resetRecord();return}return this.__firstLineToColumns(b)}if(n===!1&&this.info.records===0&&(this.state.expectedRecordLength=B),B!==this.state.expectedRecordLength){const N=n===!1?new T("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${B} on line ${this.info.lines}`],this.options,this.__infoField(),{record:b}):new T("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${n.length},`,`got ${B} on line ${this.info.lines}`],this.options,this.__infoField(),{record:b});if(u===!0||h===!0&&B<this.state.expectedRecordLength||f===!0&&B>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=N;else{const y=this.__error(N);if(y)return y}}if(g===!0&&hr(b)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,l===1||this.info.records>=l){const{objname:N}=this.options;if(n!==!1){const y={};for(let E=0,D=b.length;E<D;E++)n[E]===void 0||n[E].disabled||(o===!0&&y[n[E].name]!==void 0?Array.isArray(y[n[E].name])?y[n[E].name]=y[n[E].name].concat(b[E]):y[n[E].name]=[y[n[E].name],b[E]]:y[n[E].name]=b[E]);if(m===!0||a===!0){const E=Object.assign({record:y},m===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),D=this.__push(N===void 0?E:[y[N],E],i);if(D)return D}else{const E=this.__push(N===void 0?y:[y[N],y],i);if(E)return E}}else if(m===!0||a===!0){const y=Object.assign({record:b},m===!0?{raw:this.state.rawBuffer.toString(s)}:{},a===!0?{info:this.__infoRecord()}:{}),E=this.__push(N===void 0?y:[b[N],y],i);if(E)return E}else{const y=this.__push(N===void 0?b:[b[N],b],i);if(y)return y}}this.__resetRecord()},__firstLineToColumns:function(i){const{firstLineToHeaders:n}=this.state;try{const o=n===void 0?i:n.call(null,i);if(!Array.isArray(o))return this.__error(new T("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(o)}`],this.options,this.__infoField(),{headers:o}));const s=ti(o);this.state.expectedRecordLength=s.length,this.options.columns=s,this.__resetRecord();return}catch(o){return o}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:i,encoding:n,rtrim:o,max_record_size:s}=this.options,{enabled:a,wasQuoting:l}=this.state;if(a===!1)return this.__resetField();let u=this.state.field.toString(n);if(o===!0&&l===!1&&(u=u.trimRight()),i===!0){const[h,f]=this.__cast(u);if(h!==void 0)return h;u=f}this.state.record.push(u),s!==0&&typeof u=="string"&&(this.state.record_length+=u.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(i,n){const{on_record:o}=this.options;if(o!==void 0){const s=this.__infoRecord();try{i=o.call(null,i,s)}catch(a){return a}if(i==null)return}n(i)},__cast:function(i){const{columns:n,relax_column_count:o}=this.options;if(Array.isArray(n)===!0&&o&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const a=this.__infoField();return[void 0,this.state.castField.call(null,i,a)]}catch(a){return[a]}if(this.__isFloat(i))return[void 0,parseFloat(i)];if(this.options.cast_date!==!1){const a=this.__infoField();return[void 0,this.options.cast_date.call(null,i,a)]}return[void 0,i]},__isCharTrimable:function(i,n){return((s,a)=>{const{timchars:l}=this.state;e:for(let u=0;u<l.length;u++){const h=l[u];for(let f=0;f<h.length;f++)if(h[f]!==s[a+f])continue e;return h.length}return 0})(i,n)},__isFloat:function(i){return i-parseFloat(i)+1>=0},__compareBytes:function(i,n,o,s){if(i[0]!==s)return 0;const a=i.length;for(let l=1;l<a;l++)if(i[l]!==n[o+l])return 0;return a},__isDelimiter:function(i,n,o){const{delimiter:s,ignore_last_delimiters:a}=this.options;if(a===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(a!==!1&&typeof a=="number"&&this.state.record.length===a-1)return 0;e:for(let l=0;l<s.length;l++){const u=s[l];if(u[0]===o){for(let h=1;h<u.length;h++)if(u[h]!==i[n+h])continue e;return u.length}}return 0},__isRecordDelimiter:function(i,n,o){const{record_delimiter:s}=this.options,a=s.length;e:for(let l=0;l<a;l++){const u=s[l],h=u.length;if(u[0]===i){for(let f=1;f<h;f++)if(u[f]!==n[o+f])continue e;return u.length}}return 0},__isEscape:function(i,n,o){const{escape:s}=this.options;if(s===null)return!1;const a=s.length;if(s[0]===o){for(let l=0;l<a;l++)if(s[l]!==i[n+l])return!1;return!0}return!1},__isQuote:function(i,n){const{quote:o}=this.options;if(o===null)return!1;const s=o.length;for(let a=0;a<s;a++)if(o[a]!==i[n+a])return!1;return!0},__autoDiscoverRecordDelimiter:function(i,n){const{encoding:o}=this.options,s=[c.from(`\r
`,o),c.from(`
`,o),c.from("\r",o)];e:for(let a=0;a<s.length;a++){const l=s[a].length;for(let u=0;u<l;u++)if(s[a][u]!==i[n+u])continue e;return this.options.record_delimiter.push(s[a]),this.state.recordDelimiterMaxLength=s[a].length,s[a].length}return 0},__error:function(i){const{encoding:n,raw:o,skip_records_with_error:s}=this.options,a=typeof i=="string"?new Error(i):i;if(s){if(this.state.recordHasError=!0,this.options.on_skip!==void 0)try{this.options.on_skip(a,o?this.state.rawBuffer.toString(n):void 0)}catch(l){return l}return}else return a},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:i,raw:n,encoding:o}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:i===!0,index:this.state.record.length,raw:n?this.state.rawBuffer.toString(o):void 0}},__infoField:function(){const{columns:i}=this.options,n=Array.isArray(i);return{...this.__infoRecord(),column:n===!0?i.length>this.state.record.length?i[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};class Jo extends oe{constructor(e={}){super({readableObjectMode:!0,...e,encoding:null}),this.api=Ho({on_skip:(r,i)=>{this.emit("skip",r,i)},...e}),this.state=this.api.state,this.options=this.api.options,this.info=this.api.info}_transform(e,r,i){if(this.state.stop===!0)return;const n=this.api.parse(e,!1,o=>{this.push(o)},()=>{this.push(null),this.end(),this.on("end",this.destroy)});n!==void 0&&(this.state.stop=!0),i(n)}_flush(e){if(this.state.stop===!0)return;const r=this.api.parse(void 0,!0,i=>{this.push(i)},()=>{this.push(null),this.on("end",this.destroy)});e(r)}}const Qo=function(){let t,e,r;for(const n in arguments){const o=arguments[n],s=typeof o;if(t===void 0&&(typeof o=="string"||Q(o)))t=o;else if(e===void 0&&ei(o))e=o;else if(r===void 0&&s==="function")r=o;else throw new T("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(o)} at index ${n}`],e||{})}const i=new Jo(e);if(r){const n=e===void 0||e.objname===void 0?[]:{};i.on("readable",function(){let o;for(;(o=this.read())!==null;)e===void 0||e.objname===void 0?n.push(o):n[o[0]]=o[1]}),i.on("error",function(o){r(o,void 0,i.api.__infoDataSet())}),i.on("end",function(){r(void 0,n,i.api.__infoDataSet())})}if(t!==void 0){const n=function(){i.write(t),i.end()};typeof setImmediate=="function"?setImmediate(n):setTimeout(n,0)}return i};let dr;const Go=async(t,e)=>new Promise(r=>{const{columnMappings:i,requiredColumns:n,customValidator:o}=e,s=new Map;Object.keys(i).forEach(u=>{s.set(u.toLowerCase().trim(),i[u])});const a=new Set(n.map(u=>u.toLowerCase().trim()));let l=new Set;Qo(t.trim(),{skip_empty_lines:!0,relax_quotes:!0,relax_column_count:!0,trim:!0,columns:u=>{const h=Xo(u);return h?(dr=h,!1):(l=new Set(u.map(f=>f.trim().toLowerCase())),u.map(f=>{const m=f.trim().toLowerCase(),g=s.get(m);return g!==void 0?g:null}))}},(u,h)=>{let f,m="";if(u?.code==="CSV_RECORD_INCONSISTENT_COLUMNS")f="InvalidHeaderErrorInconsistent";else if(u?.code==="CSV_INVALID_COLUMN_DEFINITION")f="InvalidHeaderErrorColDefinition";else if(u?.code==="CSV_INVALID_COLUMN_MAPPING")f="DuplicatedHeaders",m=Array.from(dr).join(", ");else if(u)f="NotCSV";else{for(const g of a)if(!l.has(g)){f="InvalidHeaderErrorColDefinition",m=n.find(b=>b.toLowerCase().trim()===g)||g;break}if(!f&&o&&h.length>0)for(const g of h){const A=o(g);if(A){f=A;break}}}r({error:f,records:f?[]:h,errorColumn:m})})}),Xo=t=>{const e=new Map,r=new Set;return t.forEach(i=>{const n=i.toLowerCase().trim(),o=e.get(n)||0;e.set(n,o+1),o===1&&r.add(i)}),r.size>0?r:null},Ko=t=>{const[e,r]=S.useState([]),[i,n]=S.useState(),[o,s]=S.useState(),[a,l]=S.useState(!1);return{records:e,error:i,errorColumn:o,loading:a,clearRecords:()=>{r([])},clearValidationError:()=>{n(void 0),s(void 0)},validate:async m=>{l(!0);const g=await Go(m,t);return g.error?(n(g.error),s(g.errorColumn),r([])):(r(g.records),n(void 0),s(void 0)),l(!1),g}}},Zo={columnMappings:{"itinerary name":"itineraryName","itinerary id":"itineraryId","pnr number":"pnr",status:"status","additional information":"additionalInfo","traveler names":"travelerNames","traveler emails":"travelerEmails","segment types":"segmentTypes","segment origins":"segmentOrigins","segment destinations":"segmentDestinations"},requiredColumns:["itinerary name"],customValidator:t=>{if(!t.travelerNames||t.travelerNames.trim()==="")return"At least one traveler is required"}},ri=()=>{const[t,e]=S.useState("upload"),[r,i]=S.useState(0),[n,o]=S.useState(),[s,a]=S.useState(),[l,u]=S.useState(0),h=Ko(Zo),f=mi(),m=(I,_)=>{if(!I)return[];const F=I.split(",").map(v=>v.trim()),d=_?_.split(",").map(v=>v.trim()):[];return F.filter(v=>v).map((v,P)=>{const C=v.split(" ");return{firstName:C[0]||"",lastName:C.slice(1).join(" ")||"",email:d[P]||void 0}})},g=(I,_,F)=>{if(!I)return[];const d=I.split(",").map(C=>C.trim()),v=_?_.split(",").map(C=>C.trim()):[],P=F?F.split(",").map(C=>C.trim()):[];return d.filter(C=>C).map((C,O)=>({type:C,origin:v[O],destination:P[O]}))},A=async I=>{a(void 0),o(I.name);try{const _=f.createUploadRecord(I.name,0),F=await I.text(),d=await h.validate(F);if(d.error){a(`CSV Error: ${d.error}${d.errorColumn?` (${d.errorColumn})`:""}`);return}const v=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,C=>{const O=Math.random()*16|0;return(C==="x"?O:O&3|8).toString(16)}),P=d.records.map(C=>({id:v(),itineraryName:C.itineraryName,itineraryId:C.itineraryId,pnr:C.pnr,status:C.status,additionalInfo:C.additionalInfo,travelers:m(C.travelerNames,C.travelerEmails),segments:g(C.segmentTypes,C.segmentOrigins,C.segmentDestinations),validationStatus:"pending",missingFields:[],source:"csv",uploadId:_}));f.addItems(P),setTimeout(()=>f.validateAll(),100),e("review")}catch(_){a(_ instanceof Error?_.message:"Failed to parse CSV file")}},b=()=>{e("manual")},B=()=>{const I=["itinerary name,pnr number,status,itinerary id,additional information,traveler names,traveler emails,segment types,segment origins,segment destinations",'Business Trip to NYC,ABC123,Confirmed,IT001,Team meeting,"John Doe, Jane Smith","john@example.com, jane@example.com","Air,Hotel","SFO,NYC","NYC,NYC"'].join(`
`),_=new Blob([I],{type:"text/csv"}),F=URL.createObjectURL(_),d=document.createElement("a");d.href=F,d.download="itinerary-template.csv",d.click(),URL.revokeObjectURL(F)},N=I=>{const _=f.itineraries.find(F=>F.id===I);_&&(e("manual"),o(_.source==="csv"?n:void 0))},y=I=>{f.deleteItem(I)},E=async()=>{try{const I=await f.submitItineraries();u(I.success),e("success")}catch(I){a(I instanceof Error?I.message:"Failed to submit itineraries")}},D=()=>{e("upload"),f.clearAll(),o(void 0)},$=()=>{e("upload"),o(void 0)},K=()=>{e("review")},ie=I=>{f.getByUploadId(I).length>0&&e("review")},ne=()=>{e("upload"),o(void 0)},se=(I,_)=>{i(_),e(_===0?"upload":"history")};return H.createElement(ct,{sx:{width:"100%"}},s&&H.createElement(wi,{severity:"error",onClose:()=>a(void 0),sx:{mb:2}},s),t==="success"&&H.createElement(ct,{sx:{p:4,maxWidth:600,mx:"auto",textAlign:"center"}},H.createElement(Zi,{sx:{fontSize:64,color:"success.main",mb:2}}),H.createElement(Jt,{variant:"h5",gutterBottom:!0},"Success!"),H.createElement(Jt,{variant:"body1",color:"text.secondary",paragraph:!0},"Successfully added ",l," itineraries"),H.createElement(Ei,{variant:"contained",onClick:ne},"Add More Itineraries")),t!=="success"&&t!=="review"&&t!=="manual"&&H.createElement(ct,{sx:{borderBottom:1,borderColor:"divider"}},H.createElement(Ki,{value:r,onChange:se},H.createElement(Qt,{label:"Upload Itineraries"}),H.createElement(Qt,{label:"Upload History"}))),t==="upload"&&r===0&&H.createElement(_i,{onFileSelected:A,onManualEntryClick:b,onTemplateDownload:B,isProcessing:h.loading}),t==="review"&&H.createElement(vi,{itineraries:f.itineraries,uploadFileName:n,onEdit:N,onDelete:y,onSubmit:E,onCancel:D,isSubmitting:f.isSubmitting}),t==="history"&&r===1&&H.createElement(bi,{uploadHistory:f.uploadHistory,onViewUpload:ie}),t==="manual"&&H.createElement(gi,{onCancel:$,onSuccess:K,uploadFileName:n}))};ri.__docgenInfo={description:`AddItineraries - Main orchestrator component

Routes between UploadStep, ReviewStep, and UploadHistory`,methods:[],displayName:"AddItineraries"};const gs={title:"Pages/ItineraryManagement/AddItineraries",component:ri,parameters:{layout:"fullscreen"},tags:["autodocs"]},We={},Ye={parameters:{docs:{description:{story:`
# AddItineraries Component

This is the main orchestrator component for the bulk itinerary upload feature.

## Features

- **Upload CSV**: Drag and drop or select CSV files with itinerary data
- **Review Table**: Review parsed itineraries with validation errors
- **Upload History**: View past upload batches

## How to Use in Storybook

1. **Upload Tab**: 
   - Click "selecting" link or drag a CSV file
   - Download template CSV to see the expected format
   - Click "Manually upload an itinerary" (not yet implemented)

2. **Upload History Tab**: 
   - View past uploads
   - Click "View" to see itineraries from a specific upload

## CSV Template Format

\`\`\`csv
itinerary name,pnr number,status,itinerary id,additional information,traveler names,traveler emails,segment types,segment origins,segment destinations
Business Trip to NYC,ABC123,Confirmed,IT001,Team meeting,"John Doe, Jane Smith","john@example.com, jane@example.com","Air,Hotel","SFO,NYC","NYC,NYC"
\`\`\`

## Development Notes

- Uses existing **ItineraryUpload** component for file upload
- Uses existing **useCSV** hook for CSV parsing
- Uses existing **MuiTanStackTable** for all table displays
- Central state managed by **useItineraryAddition** hook
                `}}}};We.parameters={...We.parameters,docs:{...We.parameters?.docs,source:{originalSource:"{}",...We.parameters?.docs?.source}}};Ye.parameters={...Ye.parameters,docs:{...Ye.parameters?.docs,source:{originalSource:`{
  parameters: {
    docs: {
      description: {
        story: \`
# AddItineraries Component

This is the main orchestrator component for the bulk itinerary upload feature.

## Features

- **Upload CSV**: Drag and drop or select CSV files with itinerary data
- **Review Table**: Review parsed itineraries with validation errors
- **Upload History**: View past upload batches

## How to Use in Storybook

1. **Upload Tab**: 
   - Click "selecting" link or drag a CSV file
   - Download template CSV to see the expected format
   - Click "Manually upload an itinerary" (not yet implemented)

2. **Upload History Tab**: 
   - View past uploads
   - Click "View" to see itineraries from a specific upload

## CSV Template Format

\\\`\\\`\\\`csv
itinerary name,pnr number,status,itinerary id,additional information,traveler names,traveler emails,segment types,segment origins,segment destinations
Business Trip to NYC,ABC123,Confirmed,IT001,Team meeting,"John Doe, Jane Smith","john@example.com, jane@example.com","Air,Hotel","SFO,NYC","NYC,NYC"
\\\`\\\`\\\`

## Development Notes

- Uses existing **ItineraryUpload** component for file upload
- Uses existing **useCSV** hook for CSV parsing
- Uses existing **MuiTanStackTable** for all table displays
- Central state managed by **useItineraryAddition** hook
                \`
      }
    }
  }
}`,...Ye.parameters?.docs?.source}}};const _s=["Default","WithInstructions"];export{We as Default,Ye as WithInstructions,_s as __namedExportsOrder,gs as default};
